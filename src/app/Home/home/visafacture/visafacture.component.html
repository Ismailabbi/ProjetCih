<div class="row">
    <div class="col-md-6">
      <div class="card-counter a1">
        <i class="fa fa-file" aria-hidden="true"></i>


        <span class="count-numbers">{{FiltragevisaService.nombrefacture}}</span>
        <span class="count-name">Nombre de frais</span>
      </div>
    </div>
  
    
  
    
  
    <div class="col-md-6">
      <div class="card-counter info">
        <i class="fa fa-usd" aria-hidden="true"></i>
        <span class="count-numbers">{{FiltragevisaService.montanttotal| currency:'':true:'1.2-2'}}k</span>
        <span class="count-name">Charge totale</span>
      </div>
    </div>
  </div>


<div class="panel panel-secondary t">
    <div class="panel-heading"><img  height="100px" src="../../../../assets/Visa_Inc._logo.svg"/>
    <div class="pull-right">
        <button  (click)="affchfilter()"class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
    </div>
  </div>
    <div class="panel-body">
        <div *ngIf="filterbol" class="filters">
            <div class="row">

            <div class="col-md-4"> 
 </div>
 <div class="col-md-4"> 
</div>
<div class="col-md-4"> 
    <button type="button" (click)='calcul()' class="btn btn-primary">Actualiser</button>
</div>
             </div>
            <div class="row">
                
                  <div class="col-md-4">
<th>
  RateType:
    <div class="ng-autocomplete">
    <ng-autocomplete 
    [data]="datarate"
    placeHolder="All"
     (event)='ah()'
    [searchKeyword]="keywordrate"
    (selected)='selectrate($event)'
    (inputChanged)='onChangeSearch($event)'
    (inputFocused)='onFocused($event)'
    [itemTemplate]="itemTemplatecode"
    [notFoundTemplate]="notFoundTemplate">                                 
  </ng-autocomplete>
   </div>
  <ng-template #itemTemplatecode let-item>
      
  <a [innerHTML]="item.RateType"></a>
  </ng-template>
   
  <ng-template #notFoundTemplate let-notFound>
  <div [innerHTML]="notFound"></div>
  </ng-template>
              
            </th>
            </div>
           
            <div class="col-md-4"> <th>
              EntityType:
              <div class="ng-autocomplete">
                  <ng-autocomplete 
                    [data]="dataentity"
                    [searchKeyword]="keywordEntity"
                    (selected)='selectEntity($event)'
                    (inputChanged)='onChangeSearch($event)'
                    (inputFocused)='onFocused($event)'
                    [itemTemplate]="itemTemplate"
                    placeHolder="All"
              [notFoundTemplate]="notFoundTemplate">                                 
                  </ng-autocomplete>
                   
                  <ng-template #itemTemplate let-item>
                  <a [innerHTML]="item.EntityType"></a>
                  </ng-template>
                   
                  <ng-template #notFoundTemplate let-notFound>
                  <div [innerHTML]="notFound"></div>
                  </ng-template>
                  </div>
        </th></div>
          <div class="col-md-4">
            <th>
                Mois:
               <div class="ng-autocomplete">
                <div class="ng-autocomplete">
                <ng-autocomplete 
                [data]="datamois"
                placeHolder="All"
            
                [searchKeyword]="keywordmois"
                (selected)='selectdate($event)'
                (inputChanged)='onChangeSearch($event)'
                (inputFocused)='onFocused($event)'
                [itemTemplate]="itemTemplatdate"
                [notFoundTemplate]="notFoundTemplate">                                 
              </ng-autocomplete>
              </div>
               </div>
              <ng-template #itemTemplatdate let-item>
                  
              <a [innerHTML]="item"></a>
              </ng-template>
               
              <ng-template #notFoundTemplate let-notFound>
              <div [innerHTML]="notFound"></div>
              </ng-template>
            </th>
           
          </div>
         
          
          </div>
          <div class="row">
              <div class="col-md-3">
                  <th>
                      Ann√©e:
                      
                      <ng-autocomplete 
                      [data]="datann"
                      placeHolder="All"
                  
                      [searchKeyword]="keywordann"
                      (selected)='selectann($event)'
                      (inputChanged)='onChangeSearch($event)'
                      (inputFocused)='onFocused($event)'
                      [itemTemplate]="itemTemplatann"
                      [notFoundTemplate]="notFoundTemplate">                                 
                    </ng-autocomplete>
                     
                    <ng-template #itemTemplatann let-item>
                        
                    <a [innerHTML]="item"></a>
                    </ng-template>
                     
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </th>
                 
                </div>
                <div class="col-md-3"> <th>
                  Acceptance:
                  <ng-autocomplete 
                  [data]="datasclacceptance"
                  placeHolder="All"
                  [searchKeyword]="keywordacceptance"
                  (selected)='selectEventa($event)'
                  (inputChanged)='onChangeSearch($event)'
                  (inputFocused)='onFocused($event)'
                  [itemTemplate]="itemTemplatea"
                  [notFoundTemplate]="notFoundTemplate">                                 
                </ng-autocomplete>
                 
                <ng-template #itemTemplatea let-item>
                    
                <a [innerHTML]="item.Acceptance"></a>
                </ng-template>
                 
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
      
            </th></div>
              <div class="col-md-3">
    
         
                <th>
                  Canal:
                  <ng-autocomplete 
                  [data]="datascanal"
                  placeHolder="All"
    
                  [searchKeyword]="keywordcanal"
                  (selected)='selectEventca($event)'
                  (inputChanged)='onChangeSearch($event)'
                  (inputFocused)='onFocused($event)'
                  [itemTemplate]="itemTemplateca"
                  [notFoundTemplate]="notFoundTemplate">                                 
                </ng-autocomplete>
                 
                <ng-template #itemTemplateca let-item>
                    
                <a [innerHTML]="item.Canal"></a>
                </ng-template>
                 
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
                
            </th>
    
              </div>
              <div class="col-md-3">
                <th>
                Origin
                <ng-autocomplete 
                [data]="dataorigin"
                placeHolder="All"
  
                [searchKeyword]="keywordorigin"
                (selected)='selectEventco($event)'
                (inputChanged)='onChangeSearch($event)'
                (inputFocused)='onFocused($event)'
                [itemTemplate]="itemTemplateoo"
                [notFoundTemplate]="notFoundTemplate">                                 
              </ng-autocomplete>
               
              <ng-template #itemTemplateoo let-item>
                  
              <a [innerHTML]="item.Origine"></a>
              </ng-template>
               
              <ng-template #notFoundTemplate let-notFound>
              <div [innerHTML]="notFound"></div>
              </ng-template>
    
    </th>
    
              </div>
          
            </div>
          <hr class="new2">
        </div>
        <div class="scrollable">
        <table class="table table-striped">
            <thead>
            <tr>
            
              <th >Type </th>
              <th scope="col">EntityName </th>
              <th scope="col">Description</th>
              <th scope="col">EntityType</th>
              <th scope="col">BillingPeriod</th>
              <th scope="col">RateType</th>
              <th scope="col">BillingCurrency</th>
              <th scope="col">BillingLine</th>
              <th scope="col"> Total</th>
             

            </tr>
            </thead>
            <tbody>

            <tr #myVar *ngFor="let country of (countries|visamois:d |annevisa:an|ratevisa:rateselect|entityvisa:entityselected)" >
              <td>
               
                {{ country.Type }}&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;&shy;
              </td>
              <td>{{ country.EntityName }}</td>
              <td>{{ country.Description  }}</td>
              <td>{{ country.EntityType  }}</td>
              <td>{{ country.BillingPeriod  }}</td>
              <td>{{country.RateType}}</td>
              <td>{{country.BillingCurrency}}</td>
              <td>{{country.BillingLine}}</td>
              <td>{{country.Total}}</td>
             
              <td>
                <button type="button"(click)="show(country)" class="btn btn-warning">Detail

                </button>

              </td>
            </tr>
            </tbody>
          </table>
        </div>
      

    </div>
  </div>
  







  <popup>
    <div>
        <div style='overflow-x:scroll;overflow-y:hidden;'>
            <table class="table">
                <thead>
                  <tr>
                    <th >BillingCurrency</th>
                    <th >BillingLine</th>
                    <th >BillingPeriod</th>
                    <th > CurrentOrPrevious</th>
                    <th >Description</th>
                    <th >EntityID</th>
                    <th > EntityName</th>
                    <th >EntityType </th>
                    <th >InvoiceAccount</th>
                    <th >InvoiceDate</th>
                
                    <th >InvoiceID</th>
                    <th >Name</th>
                    <th >RateCur</th>
                    <th >RateType</th>
                    <th>SettlementID</th>
                    <th >SubInvoice</th>
                    <th>Total</th>
                    <th >Type</th>
                 

                  </tr>
                </thead>
                <tbody>
                <td>{{ factpop.BillingCurrency }}</td>
                <td>{{ factpop.BillingLine }}</td>
                <td>{{ factpop.BillingPeriod }}</td>
                <td>{{ factpop.CurrentOrPrevious }}</td>
                <td>{{ factpop.Description }}</td>
                <td>{{ factpop.EntityID }}</td>
                <td>{{ factpop.EntityName }}</td>
                <td>{{ factpop.EntityType }}</td>
                <td>{{ factpop.InvoiceAccount }}</td> 
                <td>{{ factpop.InvoiceDate }}</td> 
               
                <td>{{ factpop.InvoiceID }}</td>   
                <td>{{ factpop.Name }}</td>
                <td>{{ factpop.RateCur }}</td>
                <td>{{ factpop.RateType }}</td>
                <td>{{ factpop.SettlementID }}</td>
                <td>{{ factpop.SubInvoice }}</td>
                <td>{{ factpop.Total }}</td>
                <td>{{ factpop.Type }}0000</td>
                
               


                
   
                </tbody>
              </table>
        </div>
   </div>
   <button type="button" (click)='fermer()' class="btn btn-secondary">Fermer</button>


  </popup>